# The list of artifacts to be deployed with each release.
# {version} is substituted with the version being released in path and name.
artifacts:
  - name: s3-connector-standalone-{version}.zip
    path: s3-connector-standalone-{version}-win32.zip
    platform: windows
    displayName: "Windows executable"
  - name: s3-connector-winservice-{version}.zip
    path: s3-connector-winservice-{version}-win32.zip
    platform: windows
    displayName: "Windows service"
  - name: s3-connector-{version}.msi
    path: s3-connector-{version}.msi
    platform: windows
    displayName: "Windows installer"
  - name: s3-connector-linux-{version}.zip
    path: s3-connector-standalone-{version}-linux.zip
    platform: linux
    displayName: "Linux executable"

# A list of releases, when running the release script only the entry matching the
# provided version is used.
versions:
  "0.3.3":
    description: "Documentation update."
    changelog:
      added:
        - "Update config documentation"
  "0.3.2":
    description: "Documentation update."
    changelog:
      added:
        - "Update config documentation"
  "0.3.1":
    description: "Documentation update."
    changelog:
      added:
        - "Update config documentation"
  "0.3.0":
    description: "Fix RAW mirroring service"
    changelog:
      added:
        - "Update change detection on RAW tables in S3"
  "0.2.0":
    description: "First release candidate of Microsoft S3 connector"
    changelog:
      added:
        - "First release"

# Extractor definition
extractor:
  externalId: s3-connector
  name: Cognite S3 Connector
  description: Connect to Microsoft S3 and exchange data with Cognite Data Fusion.
  documentation: |
    The Cognite S3 Connector is a generic connector that can connect to Microsoft S3 and exchange data with Cognite Data Fusion.

    The replicator consists of four services:
      * Time series replicator - Copies time series data from CDF to S3.
      * Data model replicator - Copies data model nodes and edges from CDF to S3.
      * Event replicator - Copies event data from CDF to S3.
      * RAW replicator - Copies RAW tables from CDF to S3
      * S3 data extractor - Copies time series, events, and files from S3 to CDF.

  type: global # Filterable type
  tags:
    - s3
  image: assets/s3.svg

schema:
  rootSchema: schema/config.schema.json

documentation:
  includeLeafNodes: false
  preamble:
    - docs_preamble.md
    - https://raw.githubusercontent.com/cognitedata/python-extractor-utils/318d74db49536baabb707b2587e1244037e9cc07/schema/docs/remote_tip.md
    - https://raw.githubusercontent.com/cognitedata/python-extractor-utils/318d74db49536baabb707b2587e1244037e9cc07/schema/docs/envsub.md
    - https://raw.githubusercontent.com/cognitedata/python-extractor-utils/318d74db49536baabb707b2587e1244037e9cc07/schema/docs/keyvault.md
  skipHeader: true